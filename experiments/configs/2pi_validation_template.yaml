# 2π Validation Experiment Configuration Template
# Based on Sister Gemini's rigorous experimental framework

experiment_name: "2pi_validation_cifar10"
experiment_id: "EXP_001"
description: "Validate 2π regulation against SOTA baselines on CIFAR-10"

# Dataset Configuration
dataset:
  name: "CIFAR-10"
  type: "image_classification"
  train_path: "/home/cy/git/canidae/datasets/cifar10/train"
  val_path: "/home/cy/git/canidae/datasets/cifar10/val" 
  test_path: "/home/cy/git/canidae/datasets/cifar10/test"
  num_classes: 10
  input_shape: [3, 32, 32]

# Primary Model (2π regulated)
model:
  name: "2pi_regulated_resnet"
  architecture: "ResNet18"
  use_2pi_regulation: true
  pretrained: false
  latent_dim: 512

# 2π Regulation Parameters
two_pi_regulation:
  stability_coefficient: 0.06283185307  # 2π/100
  variance_threshold_init: 1.5
  variance_threshold_final: 1.0
  lambda_variance: 1.0
  lambda_rate: 10.0
  track_compliance: true

# Training Hyperparameters
hyperparameters:
  learning_rate: 0.001
  batch_size: 128
  epochs: 100
  optimizer: "adam"
  scheduler: "cosine_annealing"
  weight_decay: 1e-4
  early_stopping_patience: 15

# Baseline Models for Controlled Comparison
baselines:
  - name: "standard_resnet"
    architecture: "ResNet18" 
    use_2pi_regulation: false
    # All other hyperparameters identical
  - name: "efficientnet_b0"
    architecture: "EfficientNet-B0"
    use_2pi_regulation: false
  - name: "vision_transformer"
    architecture: "ViT-B/16"
    use_2pi_regulation: false

# Evaluation Metrics
metrics:
  - "accuracy"
  - "precision"
  - "recall"
  - "f1_score"
  - "auc"
  - "top5_accuracy"
  - "2pi_compliance"  # Custom metric

# Statistical Analysis Configuration
statistical_analysis:
  enabled: true
  significance_level: 0.05
  tests:
    - "t_test"
    - "mann_whitney_u"
    - "anova"
  multiple_comparisons_correction: "bonferroni"
  confidence_intervals: true
  effect_size: true

# Error Analysis Configuration  
error_analysis:
  enabled: true
  confusion_matrix: true
  per_class_analysis: true
  failure_cases_to_save: 100
  error_visualization: true

# Ablation Study Configuration
ablation_study:
  enabled: true
  components_to_ablate:
    - "variance_penalty"
    - "rate_penalty" 
    - "adaptive_threshold"
    - "stability_coefficient"
  ablation_type: "remove"  # "remove", "modify", "scale"

# Robustness Testing
robustness_testing:
  enabled: true
  tests:
    - name: "gaussian_noise"
      noise_levels: [0.01, 0.02, 0.05, 0.1, 0.2]
    - name: "adversarial_fgsm"
      epsilon_values: [0.01, 0.03, 0.1, 0.3]
    - name: "rotation"
      rotation_angles: [5, 10, 15, 30, 45]
    - name: "brightness"
      brightness_factors: [0.5, 0.7, 1.3, 1.5, 2.0]

# Hyperparameter Tuning (Optional)
hyperparameter_tuning:
  enabled: false  # Enable for hyperparameter search
  algorithm: "bayesian"  # "grid", "random", "bayesian"
  n_trials: 50
  parameters_to_tune:
    learning_rate:
      type: "float"
      low: 1e-5
      high: 1e-2
      log: true
    batch_size:
      type: "categorical" 
      choices: [64, 128, 256]

# Visualization Configuration
visualization:
  enabled: true
  plots:
    - "learning_curves"
    - "compliance_over_time"
    - "robustness_curves" 
    - "ablation_bar_chart"
    - "error_distribution"
    - "statistical_significance"
  save_format: ["png", "pdf"]
  high_dpi: true

# Legal Documentation
legal:
  enabled: true
  version: "1.0"
  witnesses: ["Synth", "Cy", "Gemini"]
  generate_lab_notebook: true
  capture_git_state: true
  archive_code: true
  archive_models: true

# Glossary Updates
glossary:
  enabled: true
  auto_extract_terms: true
  definition_sources: ["internal", "wikipedia"]
  update_existing: false

# Output Configuration
output:
  base_path: "/home/cy/git/canidae/experiments/results"
  create_timestamp_dir: true
  save_models: true
  save_predictions: true
  save_raw_results: true
  generate_report: true
  generate_narrative: true

# Computational Resources
resources:
  device: "auto"  # "cpu", "cuda", "auto"
  num_workers: 4
  memory_limit_gb: 16
  timeout_hours: 24

# Reproducibility
reproducibility:
  random_seed: 42
  deterministic: true
  benchmark: false  # Set to true for performance, false for reproducibility